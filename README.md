# Wait for jobs [![Build & Tests](https://github.com/yogeshlonkar/wait-for-jobs/actions/workflows/on-push.yaml/badge.svg)](https://github.com/yogeshlonkar/wait-for-jobs/actions/workflows/on-push.yaml)

Wait for the specified jobs in the same run to be complete successfully before proceeding, helpful to prestart the job.

## Usage

### Pre-requisites

This step requires below permissions, it is available by default to all the jobs but in case of shared workflows it might be necessary to set it

```yaml
permissions:
  actions: read
```

### Input

```yaml
- uses: yogeshlonkar/wait-for-jobs@v0
  with:
    # GitHub token to access actions API
    # required: true
    gh-token: ${{ secrets.GITHUB_TOKEN }}

    # To ignore jobs that are skipped from given list of job dependencies
    # default: 'false'
    # required: false
    ignore-skipped: 'false'

    # Comma or newline separated list of names of job dependencies for this step
    # required: true
    jobs: 'job1,job2,job3'

    # Comma separated list of JSON artifacts from (jobs in) this build that will be parse to set as output for this step
    # required: false
    outputsFrom: 'job1_output.json,job2_output.json'

    # Instead of exact job name match check suffix or job names, useful in case of reusable workflows
    # default: 'false'
    # required: false
    suffix: 'true'

    # Interval in milliseconds between each check of dependencies completion
    # default: '2000'
    # required: false
    interval: '2500'

    # Maximum number of minutes to wait before giving up, step will fail with message providing remaining job names. Can't be more than 15
    # default: '5'
    # required: false
    ttl: '10'
```

### Output

This action has output named `outputs` which is JSON string generated by parsing provided JSON artifacts from (jobs in) this build. Make sure output file names and output names are unique for each job to avoid overwritting outputs

```yaml
- id: wait-for-jobs
  uses: yogeshlonkar/wait-for-jobs@v0
  with:
    gh-token: ${{ secrets.GITHUB_TOKEN }}
    jobs: |
      job1
      job2
      job3
    outputsFrom: output1.json,output2.json
- run: |
    echo ${{ fromJSON(steps.wait-for-jobs.outputs.outputs).out1 }}
    echo ${{ fromJSON(steps.wait-for-jobs.outputs.outputs).out2 }}
```
